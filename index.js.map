{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["// import { isFunction } from 'lodas\nconst isFunction = object => !!(object && object.constructor && object.call && object.apply);\n\nconst GeoLocation = () => navigator.geolocation;\n\nconst addTimeout = (geo, time) => {\n  let id;\n  return {\n    create: (geoId, error) => {\n      id = setTimeout(() => {\n        geo.clearWatch(geoId);\n        if (isFunction(error)) error('Timed out');\n      }, time);\n    },\n    remove: () => {\n      clearTimeout(id);\n    },\n  };\n};\n\nconst geoSuccess = (callback, clearTimeout) => ({ coords: { latitude, longitude } }) => {\n  if (isFunction(callback)) callback(latitude, longitude);\n  if (isFunction(clearTimeout)) clearTimeout();\n};\n\nconst geoFail = (error, clearTimeout) => err => {\n  if (isFunction(error)) error(err);\n  if (isFunction(clearTimeout)) clearTimeout();\n};\n\nexport default wait => {\n  let fail, geoId, geoLoc, remove, success, timeout;\n\n  geoLoc = GeoLocation();\n\n  if (!geoLoc) return;\n\n  if (wait) {\n    timeout = addTimeout(geoLoc, wait);\n    remove = timeout.remove;\n  }\n\n  return (callback, error) => {\n    success = geoSuccess(callback, remove);\n    fail = geoFail(error, remove);\n    geoId = geoLoc.watchPosition(success, fail);\n\n    if (timeout) timeout.create(geoId, error);\n  };\n};\n"],"names":["isFunction","object","constructor","call","apply","wait","fail","geoId","geoLoc","remove","success","timeout","navigator","geolocation","geo","time","id","create","error","setTimeout","clearWatch","clearTimeout","addTimeout","callback","coords","latitude","longitude","geoSuccess","err","geoFail","watchPosition"],"mappings":"uMACmB,SAAbA,EAAaC,YAAaA,GAAUA,EAAOC,aAAeD,EAAOE,MAAQF,EAAOG,uBA6BvEC,OACTC,EAAMC,EAAOC,EAAQC,EAAQC,EAASC,KAE1CH,EA9BwBI,UAAUC,mBAkC9BR,IACFM,EAjCe,SAACG,EAAKC,OACnBC,QACG,CACLC,OAAQ,SAACV,EAAOW,GACdF,EAAKG,WAAW,WACdL,EAAIM,WAAWb,GACXP,EAAWkB,IAAQA,EAAM,cAC5BH,IAELN,OAAQ,WACNY,aAAaL,KAuBLM,CAAWd,EAAQH,GAC7BI,EAASE,EAAQF,QAGZ,SAACc,EAAUL,GAChBR,EAvBe,SAACa,EAAUF,UAAiB,oBAAGG,OAAUC,IAAAA,SAAUC,IAAAA,UAChE1B,EAAWuB,IAAWA,EAASE,EAAUC,GACzC1B,EAAWqB,IAAeA,KAqBlBM,CAAWJ,EAAUd,GAC/BH,EAnBY,SAACY,EAAOG,UAAiB,SAAAO,GACnC5B,EAAWkB,IAAQA,EAAMU,GACzB5B,EAAWqB,IAAeA,KAiBrBQ,CAAQX,EAAOT,GACtBF,EAAQC,EAAOsB,cAAcpB,EAASJ,GAElCK,GAASA,EAAQM,OAAOV,EAAOW"}